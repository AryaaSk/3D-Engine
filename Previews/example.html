<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- <script src="/Source/aryaa3D.js"></script> --> <!-- Use during development -->
    <script src="https://aryaask.github.io/3D-Engine/Source/aryaa3D.js"></script>
    
    <title>3D Engine</title>

    <style>
        body
        {
            margin: 0;
        }
        #renderingWindow
        {
            height: 100vh;
            width: 100vw;
        }
    </style>
</head>
<body>
    
    <h1 style="text-align: center; position: absolute; left: 0; right: 0; margin-top: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">
        Rotate the world with the mouse <br>
        Hold alt and move mouse to move camera <br>
        Scroll up/down to zoom in/out of the point
    </h1>

    <canvas id="renderingWindow"></canvas>

    <script>
        linkCanvas("renderingWindow");

        const camera = new Camera();
        camera.worldRotation.x = -20;
        camera.worldRotation.y = 20;
        camera.updateRotationMatrix();
        camera.enableMovementControls("renderingWindow");
        camera.showScreenOrigin = true;

        const cube = new Box(100, 100, 100);
        cube.scale = 1;
        cube.position.x = 300;
        cube.faces[5].colour = ""; //back face is transparent
        cube.updateMatrices();

        const pyramid = new SquareBasedPyramid(50, 100);
        pyramid.position.x = -300;
        pyramid.scale = 2;
        pyramid.showOutline();
        pyramid.showFaceIndexes = true;
        pyramid.updateMatrices();

        const triangularPrism = new TriangularPrism(100, 100, 400);
        triangularPrism.showOutline();
        triangularPrism.position.z = 600;

        const elongatedOctahedron = new ElongatedOctahedron(200, 200, 200);
        elongatedOctahedron.showOutline();
        elongatedOctahedron.faces[8].colour = ""; //top half is transparent, now it looks like a bowl
        elongatedOctahedron.faces[9].colour = "";
        elongatedOctahedron.faces[10].colour = "";
        elongatedOctahedron.faces[11].colour = "";

        //SHAPES BUILT WITH SHAPE BUILDER:
        class PentagonalPrism extends Shape {
            constructor () {
                super();

                this.pointMatrix = new matrix();
                const points = [[0,0,0],[100,0,0],[150,100,0],[50,150,0],[-50,100,0],[0,0,200],[100,0,200],[150,100,200],[50,150,200],[-50,100,200]];
                for (let i = 0; i != points.length; i += 1)
                { this.pointMatrix.addColumn(points[i]); }

                const [centeringX, centeringY, centeringZ] = [-50, -75, -100];
                this.pointMatrix.translateMatrix(centeringX, centeringY, centeringZ);

                this.setFaces();
                this.updateMatrices();
            }
            setFaces() {
                this.faces = [{pointIndexes:[0,1,6,5],colour:"#ff2600"},{pointIndexes:[1,2,7,6],colour:"#ff9300"},{pointIndexes:[2,3,8,7],colour:"#fffb00"},{pointIndexes:[3,4,9,8],colour:"#00f900"},{pointIndexes:[0,4,9,5],colour:"#00fdff"},{pointIndexes:[0,1,2,3,4],colour:"#0433ff"},{pointIndexes:[5,6,7,8,9],colour:"#ff40ff"}];
            }
        }
        const pentagon = new PentagonalPrism()
        pentagon.position.x = -300;
        pentagon.position.y = 300;
        pentagon.showOutline();

        class Shuriken extends Shape {
            constructor () {
                super();

                this.pointMatrix = new matrix();
                const points = [[-100,0,100],[100,0,100],[-100,0,-100],[100,0,-100],[0,0,300],[300,0,0],[0,0,-300],[-300,0,0],[0,30,0],[0,-30,0]];
                for (let i = 0; i != points.length; i += 1)
                { this.pointMatrix.addColumn(points[i]); }

                const [centeringX, centeringY, centeringZ] = [0, 0, 0];
                this.pointMatrix.translateMatrix(centeringX, centeringY, centeringZ);

                this.setFaces();
                this.updateMatrices();
            }
            setFaces() {
                this.faces = [{pointIndexes:[8,4,0],colour:"#c4c4c4"},{pointIndexes:[8,4,1],colour:"#000000"},{pointIndexes:[8,1,5],colour:"#c4c4c4"},{pointIndexes:[8,5,3],colour:"#000000"},{pointIndexes:[8,3,6],colour:"#c4c4c4"},{pointIndexes:[8,2,6],colour:"#000000"},{pointIndexes:[8,2,7],colour:"#c4c4c4"},{pointIndexes:[8,0,7],colour:"#000000"},{pointIndexes:[9,4,0],colour:"#c4c4c4"},{pointIndexes:[9,4,1],colour:"#000000"},{pointIndexes:[9,1,5],colour:"#c4c4c4"},{pointIndexes:[9,5,3],colour:"#000000"},{pointIndexes:[9,3,6],colour:"#c4c4c4"},{pointIndexes:[9,2,6],colour:"#000000"},{pointIndexes:[9,2,7],colour:"#c4c4c4"},{pointIndexes:[9,0,7],colour:"#050505"}];
            }
        }
        const shuriken = new Shuriken();
        shuriken.position.x = 300;
        shuriken.position.z = 300;
        shuriken.scale = 0.5;
        shuriken.updateMatrices();


        class Sphere extends Shape {
            constructor () {
                super();

                this.pointMatrix = new matrix();
                const points = [[-60,-82.5,20],[-20,-82.5,60],[20,-82.5,60],[60,-82.5,20],[60,-82.5,-20],[20,-82.5,-60],[-20,-82.5,-60],[-60,-82.5,-20],[-84,-49.50000000000001,28],[-28,-49.50000000000001,84],[28,-49.50000000000001,84],[84,-49.50000000000001,28],[84,-49.50000000000001,-28],[28,-49.50000000000001,-84],[-28,-49.50000000000001,-84],[-84,-49.50000000000001,-28],[-100,-16.5,33.6],[-33.6,-16.5,100],[33.6,-16.5,100],[100,-16.5,33.6],[100,-16.5,-33.6],[33.6,-16.5,-100],[-33.6,-16.5,-100],[-100,-16.5,-33.6],[-84,49.50000000000001,28],[-28,49.50000000000001,84],[28,49.50000000000001,84],[84,49.50000000000001,28],[84,49.50000000000001,-28],[28,49.50000000000001,-84],[-28,49.50000000000001,-84],[-84,49.50000000000001,-28],[-60,82.5,20],[-20,82.5,60],[20,82.5,60],[60,82.5,20],[60,82.5,-20],[20,82.5,-60],[-20,82.5,-60],[-60,82.5,-20],[-100,16.5,33.6],[-33.6,16.5,100],[33.6,16.5,100],[100,16.5,33.6],[100,16.5,-33.6],[33.6,16.5,-100],[-33.6,16.5,-100],[-100,16.5,-33.6],[0,-104.50000000000001,0],[0,104.50000000000001,0]];
                for (let i = 0; i != points.length; i += 1)
                { this.pointMatrix.addColumn(points[i]); }

                const [centeringX, centeringY, centeringZ] = [0, 0, 0];
                this.pointMatrix.translateMatrix(centeringX, centeringY, centeringZ);

                this.setFaces();
                this.updateMatrices();
            }
            setFaces() {
                this.faces = [{pointIndexes:[0,8,15,7],colour:"#c4c4c4"},{pointIndexes:[7,6,14,15],colour:"#c4c4c4"},{pointIndexes:[6,5,13,14],colour:"#c4c4c4"},{pointIndexes:[5,4,12,13],colour:"#c4c4c4"},{pointIndexes:[4,3,11,12],colour:"#c4c4c4"},{pointIndexes:[3,2,10,11],colour:"#c4c4c4"},{pointIndexes:[2,1,9,10],colour:"#c4c4c4"},{pointIndexes:[1,0,8,9],colour:"#c4c4c4"},{pointIndexes:[9,8,16,17],colour:"#c4c4c4"},{pointIndexes:[8,15,23,16],colour:"#c4c4c4"},{pointIndexes:[15,14,22,23],colour:"#c4c4c4"},{pointIndexes:[14,13,21,22],colour:"#c4c4c4"},{pointIndexes:[13,12,20,21],colour:"#c4c4c4"},{pointIndexes:[12,11,19,20],colour:"#c4c4c4"},{pointIndexes:[11,10,18,19],colour:"#c4c4c4"},{pointIndexes:[10,9,17,18],colour:"#c4c4c4"},{pointIndexes:[18,17,41,42],colour:"#c4c4c4"},{pointIndexes:[17,16,40,41],colour:"#c4c4c4"},{pointIndexes:[16,23,47,40],colour:"#c4c4c4"},{pointIndexes:[23,22,46,47],colour:"#c4c4c4"},{pointIndexes:[22,21,45,46],colour:"#c4c4c4"},{pointIndexes:[21,20,44,45],colour:"#c4c4c4"},{pointIndexes:[20,19,43,44],colour:"#c4c4c4"},{pointIndexes:[19,18,42,43],colour:"#c4c4c4"},{pointIndexes:[44,28,27,43],colour:"#c4c4c4"},{pointIndexes:[43,27,26,42],colour:"#c4c4c4"},{pointIndexes:[42,26,25,41],colour:"#c4c4c4"},{pointIndexes:[41,25,24,40],colour:"#c4c4c4"},{pointIndexes:[40,24,31,47],colour:"#c4c4c4"},{pointIndexes:[47,31,30,46],colour:"#c4c4c4"},{pointIndexes:[46,30,29,45],colour:"#c4c4c4"},{pointIndexes:[45,29,28,44],colour:"#c4c4c4"},{pointIndexes:[30,29,37,38],colour:"#c4c4c4"},{pointIndexes:[29,28,36,37],colour:"#c4c4c4"},{pointIndexes:[28,27,35,36],colour:"#c4c4c4"},{pointIndexes:[27,26,34,35],colour:"#c4c4c4"},{pointIndexes:[26,25,33,34],colour:"#c4c4c4"},{pointIndexes:[25,24,32,33],colour:"#c4c4c4"},{pointIndexes:[24,31,39,32],colour:"#c4c4c4"},{pointIndexes:[31,30,38,39],colour:"#c4c4c4"},{pointIndexes:[7,48,6],colour:"#c4c4c4"},{pointIndexes:[6,48,5],colour:"#c4c4c4"},{pointIndexes:[5,48,4],colour:"#c4c4c4"},{pointIndexes:[4,48,3],colour:"#c4c4c4"},{pointIndexes:[3,48,2],colour:"#c4c4c4"},{pointIndexes:[2,48,1],colour:"#c4c4c4"},{pointIndexes:[1,48,0],colour:"#c4c4c4"},{pointIndexes:[0,48,7],colour:"#c4c4c4"},{pointIndexes:[38,49,39],colour:"#c4c4c4"},{pointIndexes:[49,38,37],colour:"#c4c4c4"},{pointIndexes:[37,49,36],colour:"#c4c4c4"},{pointIndexes:[36,49,35],colour:"#c4c4c4"},{pointIndexes:[35,49,34],colour:"#c4c4c4"},{pointIndexes:[34,49,33],colour:"#c4c4c4"},{pointIndexes:[33,49,32],colour:"#c4c4c4"},{pointIndexes:[49,32,39],colour:"#c4c4c4"}];
            }
        }
        const sphere = new Sphere();
        sphere.position.x = 300;
        sphere.position.y = 300;
        sphere.position.z = -300;
        sphere.showOutline();

        setInterval(() => { //animation loop
            cube.rotation.y += 1;
            cube.rotation.z += 1;
            cube.updateQuaternion();

            shuriken.rotation.y += 3;
            shuriken.updateQuaternion();

            sphere.rotation.x += 1;
            sphere.rotation.y += 1;
            sphere.updateQuaternion();

            clearCanvas();
            camera.renderGrid();
            camera.render([cube, pyramid, triangularPrism, elongatedOctahedron, pentagon, shuriken, sphere]);
        }, 16);
    </script>

</body>
</html>